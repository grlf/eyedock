function weightChange(){weight_lbs=jQuery("#slider-weight").slider("value");weight_kg=parseFloat(calcKg(weight_lbs));jQuery("#weight_input").val(weight_lbs);jQuery("#extraweight").html(weight_lbs+" lbs = "+weight_kg.toFixed(1)+" Kg");doDailyCalc()}function heightChange(){height_inches=jQuery("#slider-height").slider("value");height_m=calcMeters(height_inches);var e=height_m.toFixed(3)+" meters",t=calcFeetInches(height_inches);jQuery("#height_input").val(height_inches);jQuery("#extraheight").html(height_inches+'" = '+t+" = "+e);doDailyCalc()}function doDailyCalc(){var e=safeDose(weight_kg),t=calcBMI();jQuery("#bmi").html(t+" ("+bmiString()+")");jQuery("#weightResult").html(weight_kg.toFixed(1));jQuery("#dailyResult").html(e.toFixed(0));if(e>=400){jQuery("#dailyResult").addClass("green");jQuery("#dailyResult").removeClass("red")}else{jQuery("#dailyResult").removeClass("green");jQuery("#dailyResult").addClass("red")}var n="<p>";e>400&&(n+="  Taking the typical Plaquenil dosage (two 200 mg tablets or 400 mg/day) would be considered appropriate (in the absence of other risk factors).");e<400&&(n+="  Taking the typical Plaquenil dosage (two 200 mg tablets or 400 mg/day), <i>may</i> place your patient at higher risk for retinotoxicity.");n+="</p>";if(t>24.9){n+="  <b>However</b>, as the BMI is "+bmiString()+', it may be more appropriate to use the <i>ideal</i> body weight to calculate the generally regarded "safe" dose (see accompanying explanation on this page).';n+="  For this height this patient's ideal weight would be "+calcPounds(idealWeight()).toFixed(1)+" lbs ("+idealWeight().toFixed(1)+" kg).";n+='  Using this weight, the "safe" dose would be <b>'+safeDose(idealWeight()).toFixed()+" mg / day</b>."}else n+="  As the BMI is <i>not</i> classified as overweight, using the patient's true weight should be appropriate for dosage calculations.";n+="</p><p></p>";jQuery("#daily_discussion").html(n)}function calcMeters(e){return e*.0254}function calcFeetInches(e){var t=parseInt(e/12),n=e%12;return t+"' "+n+'"'}function calcInches(){var e=0,t=jQuery("#height_ft").val(),n=jQuery("#height_in").val();e=t*12+n*1;return e}function calcKg(e){return e*.45359}function calcPounds(e){return e/.45359}function safeDose(e){return 6.5*e}function calcBMI(){var e=weight_kg/(height_m*height_m);return e.toFixed(1)}function bmiString(){var e="underweight",t=calcBMI();t>=18.5&&(e="normal weight");t>24.9&&(e="overweight");t>29.9&&(e="class I obesity");t>34.9&&(e="class II obesity");t>=40&&(e="class III obesity");return e}function idealWeight(){var e=jQuery("#female").is(":checked")?45.5:50;ans=e+2.3*(height_inches-60);return ans}function cloneClicked(e){var t=jQuery(e.target||e.srcElement).closest(".cumRow");cloneFilterRow(t)}function cloneFilterRow(e){var t=jQuery(e).clone(!0).insertAfter(jQuery(e)),n=jQuery(e).find("select");jQuery(n).each(function(e){var n=this;jQuery(t).find("select").eq(e).val(jQuery(n).val())});doCumCalc()}function removeFilterRow(e){var t=jQuery(e.target||e.srcElement).closest(".cumRow"),n=jQuery(".cumRow").length;n>1&&jQuery(t).closest(".cumRow").remove();doCumCalc()}function doCumCalc(){var e=0;jQuery(".cumRow").each(function(){var t=jQuery(this).find(".dose").val(),n=jQuery(this).find(".freq option:selected").val(),r=jQuery(this).find(".time option:selected").val(),i=jQuery(this).find(".months_years option:selected").val(),s=t*n*365*r*(i/12)/1e3,o="("+s.toFixed(0)+"g)";jQuery(this).find(".rowTotal").html(o);e+=s;jQuery("#cumAnswer").html(e.toFixed(0)+"g");if(e>=1e3){jQuery("#cumAnswer").addClass("red");jQuery("#cumAnswer").removeClass("green")}else{jQuery("#cumAnswer").removeClass("red");jQuery("#cumAnswer").addClass("green")}})}var height_m,height_inches=64,weight_kg=54,weight_lbs=120,minWeight=70,maxWeight=300,minHeight=48,maxHeight=86;jQuery(document).ready(function(){jQuery("#sex").buttonset();jQuery("#slider-weight").slider({range:"min",min:minWeight,max:maxWeight,value:weight_lbs,slide:weightChange});jQuery("#slider-height").slider({range:"min",min:minHeight,max:maxHeight,value:height_inches,slide:heightChange});jQuery("#weight_input").change(function(){var e=parseInt(jQuery(this).val());weight_lbs=e>=minWeight&&e<=maxWeight?e:weight_lbs;jQuery("#slider-weight").slider("value",weight_lbs);weightChange()});jQuery("#height_input").change(function(){var e=parseInt(jQuery(this).val());height_inches=e>=minHeight&&e<=maxHeight?e:height_inches;jQuery("#slider-height").slider("value",height_inches);heightChange()});weightChange();heightChange()});jQuery(document).ready(function(){jQuery(".cumRow input, .cumRow select").change(function(){doCumCalc()});doCumCalc()});